{"tag":"Node.Js","isDark":false,"type":"tag","path":"tags/Node-Js/","json_base":"data/tags/Node-Js/","json":"data/tags/Node-Js/1.json","current":1,"total":1,"posts":[{"type":"post","json_base":"data/posts","json":"data/posts/2014/05/02/bright-star-catalogue-convertor.json","path":"2014/05/02/bright-star-catalogue-convertor/","data":{"title":"BSC星表数据通用转换脚本","content":"<h2 id=\"u7B80_u4ECB\"><a href=\"#u7B80_u4ECB\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>这两天开始用WebGL做一个星图App，需要处理各种星表数据。</p>\n<p><a href=\"http://en.wikipedia.org/wiki/Bright_Star_Catalogue\" target=\"_blank\" rel=\"external\">Yale Bright Star Catalogue</a> (BSC, 亮星星表)包含了所有视星等6.5以上的恒星(9000+枚)，基本上就是人类狗眼能看到的所有恒星了。</p>\n<p>写了这个转换脚本，可以将星表数据转换为任意格式，只需要创建对应格式的underscore template就行了。</p>\n<h2 id=\"u4E0B_u8F7D\"><a href=\"#u4E0B_u8F7D\" class=\"headerlink\" title=\"下载\"></a>下载</h2><p>Markdown格式化后的BSC 5th Edition Readme: <a href=\"https://github.com/akfish/Universe/tree/master/data/catalog/bsc\" target=\"_blank\" rel=\"external\">Bright Star Catalogue, 5th Revised Ed. </a></p>\n<p>转换脚本: <a href=\"https://github.com/akfish/Universe/tree/master/data/catalog/bsc/convertor\" target=\"_blank\" rel=\"external\">Generic Convertor For Bright Star Catalogue</a></p>\n<h2 id=\"u5B89_u88C5\"><a href=\"#u5B89_u88C5\" class=\"headerlink\" title=\"安装\"></a>安装</h2><ul>\n<li>Node.Js</li>\n<li>在脚本目录中<code>npm install</code>如下包：<ul>\n<li>coffee-script</li>\n<li>async</li>\n<li>underscore</li>\n</ul>\n</li>\n<li><a href=\"https://github.com/akfish/Universe/tree/master/data/catalog/bsc#file-summary\" target=\"_blank\" rel=\"external\">下载</a>星表数据文件，解压<code>bsc5.dat</code>和<code>notes</code>文件，放到和脚本相同目录</li>\n<li>和脚本一起的有一个简单的<code>json</code>模板(underscore template)，也可以根据需要自己创建，放到和脚本相同目录</li>\n</ul>\n<h2 id=\"u8FD0_u884C\"><a href=\"#u8FD0_u884C\" class=\"headerlink\" title=\"运行\"></a>运行</h2><p>命令格式:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ coffee convert template_file_name output_file_name</span><br></pre></td></tr></table></figure></p>\n<p>例:<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ coffee convert json bsc5.json</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"u521B_u5EFA_u6A21_u677F\"><a href=\"#u521B_u5EFA_u6A21_u677F\" class=\"headerlink\" title=\"创建模板\"></a>创建模板</h2><p>参考：</p>\n<ul>\n<li><a href=\"http://underscorejs.org/#template\" target=\"_blank\" rel=\"external\">underscore.js template</a></li>\n<li><a href=\"https://github.com/akfish/Universe/tree/master/data/catalog/bsc/convertor#writing-templates\" target=\"_blank\" rel=\"external\">Writing Templates</a></li>\n</ul>\n","date":"2014-05-02T02:43:38.000Z","path":"2014/05/02/bright-star-catalogue-convertor/","isDark":true,"featureColor":"#2b6a7d","featureImage":"/image/stock/3.jpg","excerpt":"","featureSwatch":{"Vibrant":{"color":"#2b6a7d","isDark":true,"contrast":6.152506571402196},"Muted":{"color":"#628d9b","isDark":true,"contrast":3.8818866665042275},"DarkVibrant":{"color":"#08536a","isDark":true,"contrast":13.30121420712154},"DarkMuted":{"color":"#4d7e8e","isDark":true,"contrast":4.693454244598322},"LightVibrant":{"color":"#74d4e4","isDark":false,"contrast":1.7100585291773622},"LightMuted":{"color":"#769ca9","isDark":false,"contrast":2.958324937392382}},"json":"data/posts/2014/05/02/bright-star-catalogue-convertor.json","tags":[{"name":"Astronomy","slug":"Astronomy","path":"tags/Astronomy/","permalink":"http://catx.me/tags/Astronomy/","postCount":1},{"name":"CoffeeScript","slug":"CoffeeScript","path":"tags/CoffeeScript/","permalink":"http://catx.me/tags/CoffeeScript/","postCount":9},{"name":"Node.Js","slug":"Node-Js","path":"tags/Node-Js/","permalink":"http://catx.me/tags/Node-Js/","postCount":4}],"categories":[{"name":"挨踢","slug":"挨踢","path":"categories/挨踢/","permalink":"http://catx.me/categories/挨踢/","postCount":24},{"name":"天文","slug":"天文","path":"categories/天文/","permalink":"http://catx.me/categories/天文/","postCount":1}]},"sha1":"9d6d1a17621a87639bc840a669b88673b6ad3e2b","isDigest":true},{"type":"post","json_base":"data/posts","json":"data/posts/2014/03/12/hexo-uml-tag-plugin.json","path":"2014/03/12/hexo-uml-tag-plugin/","data":{"title":"Hexo UML插件","content":"<h2 id=\"u4ECB_u7ECD\"><a href=\"#u4ECB_u7ECD\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>技术类博客总是不可避免的要插入各种UML图，昨天偶然发现一个有意思的Javascript库<a href=\"http://jumly.tmtk.net/\" target=\"_blank\" rel=\"external\">Jumly</a>，用于渲染UML sequence diagram和robustness diagram。于是制作了一个hexo插件，便于在博客中插入。</p>\n<p><strong>Sequence Diagram</strong><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@found &#34;You&#34;, -&#62;&#10;  @message &#34;Think&#34;, -&#62;&#10;    @message &#34;Write your idea&#34;, &#34;hexo-tag-uml&#34;, -&#62;&#10;      @message &#34;&#34;, &#34;JUMLY&#34;, -&#62;&#10;        @create &#34;Diagram&#34;&#10;hexo_tag_uml.css &#34;background-color&#34;:&#34;#8CC84B&#34;</span><br></pre></td></tr></table></figure></p>\n<p><strong>Robustness Diagram</strong><br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@actor &#34;User&#34; :-&#62; @view &#34;Browser&#34;&#10;@view &#34;Browser&#34; :-&#62; @controller &#34;Server&#34;&#10;@controller &#34;Server&#34; :-&#62; @entity &#34;Database&#34;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"u5B89_u88C5\"><a href=\"#u5B89_u88C5\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-tag-uml --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"u521D_u59CB_u5316\"><a href=\"#u521D_u59CB_u5316\" class=\"headerlink\" title=\"初始化\"></a>初始化</h2><p>在blog文件夹中执行：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo uml install</span><br></pre></td></tr></table></figure>\n<p>在<code>_config.yml</code>文件中添加：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plugins:&#10;- hexo-tag-uml</span><br></pre></td></tr></table></figure></p>\n<p>在主题的<code>.ejs</code>文件的合适位置插入：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">%-</span> <span class=\"attribute\">partial</span>('<span class=\"attribute\">jumly</span>') %&gt;</span></span><br></pre></td></tr></table></figure>\n<p>一般而言可以放在<code>&lt;head&gt;</code>一节里，需要注意的是Jumly依赖于jQuery，如果主题里引用了其它位置的jQuery，会导致冲突。<br>比如hexo的默认主题landscape就在<code>after-footer.ejs</code>中插入了jQuery，需要将相应行去掉，替换为上面语句。<br>也是因为实际主题的实现哥又不同，这个插件没能实现自动修改theme layout文件。</p>\n<h2 id=\"u8BED_u6CD5\"><a href=\"#u8BED_u6CD5\" class=\"headerlink\" title=\"语法\"></a>语法</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&amp;#37; uml [diagram_type] %&#125;</span><br><span class=\"line\">&#123;&amp;#37; uml %&#125;</span><br></pre></td></tr></table></figure>\n<p><code>diagram_type</code>可以取的值为：</p>\n<ul>\n<li>sequence</li>\n<li>robustness</li>\n</ul>\n<p>如果留空，默认为sequence。</p>\n<h2 id=\"u793A_u4F8B\"><a href=\"#u793A_u4F8B\" class=\"headerlink\" title=\"示例\"></a>示例</h2><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&amp;#37; uml %&#125;</span><br><span class=\"line\">@found \"Browser\", -&gt;</span><br><span class=\"line\">  @alt &#123;</span><br><span class=\"line\"><span class=\"code\">    \"[200]\": -&gt; @message \"GET href resources\", \"HTTP Server\"</span></span><br><span class=\"line\"><span class=\"code\">    \"[301]\": -&gt; @ref \"GET the moved page\"</span></span><br><span class=\"line\"><span class=\"code\">    \"[404]\": -&gt; @ref \"show NOT FOUND\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">@find(\".ref\").css(width:256, \"padding-bottom\":4)</span><br><span class=\"line\">  .find(\".tag\").css float:\"left\"</span><br><span class=\"line\">get<span class=\"emphasis\">_the_</span>moved_page.css \"background-color\":\"#80c080\"</span><br><span class=\"line\">show<span class=\"emphasis\">_not_</span>found.css \"background-color\":\"#f0b0b0\"</span><br><span class=\"line\">&#123;&amp;#37; enduml %&#125;</span><br></pre></td></tr></table></figure>\n<p>效果</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@found &#34;Browser&#34;, -&#62;&#10;  @alt &#123;&#10;    &#34;[200]&#34;: -&#62; @message &#34;GET href resources&#34;, &#34;HTTP Server&#34;&#10;    &#34;[301]&#34;: -&#62; @ref &#34;GET the moved page&#34;&#10;    &#34;[404]&#34;: -&#62; @ref &#34;show NOT FOUND&#34;&#10;  &#125;&#10;@find(&#34;.ref&#34;).css(width:256, &#34;padding-bottom&#34;:4)&#10;  .find(&#34;.tag&#34;).css float:&#34;left&#34;&#10;get_the_moved_page.css &#34;background-color&#34;:&#34;#80c080&#34;&#10;show_not_found.css &#34;background-color&#34;:&#34;#f0b0b0&#34;</span><br></pre></td></tr></table></figure>\n<p>Jumly的表达式规则详见：<a href=\"http://jumly.tmtk.net/reference.html\" target=\"_blank\" rel=\"external\">Jumly Reference Manual</a></p>\n<p>在线编辑器：<a href=\"http://jumly.tmtk.net/try.html\" target=\"_blank\" rel=\"external\">Try Jumly</a></p>\n","date":"2014-03-12T06:23:37.000Z","path":"2014/03/12/hexo-uml-tag-plugin/","isDark":true,"featureColor":"#2f5a75","featureImage":"/image/stock/2.jpg","excerpt":"","featureSwatch":{"Vibrant":{"color":"#2f5a75","isDark":true,"contrast":12.293085300100254},"Muted":{"color":"#64767c","isDark":true,"contrast":5.234975288978602},"DarkVibrant":{"color":"#1f4b68","isDark":true,"contrast":13.414009026295917},"DarkMuted":{"color":"#477084","isDark":true,"contrast":5.611238656641319},"LightVibrant":{"color":"#ecdabf","isDark":false,"contrast":1.3683052639522741},"LightMuted":{"color":"#95b1b5","isDark":false,"contrast":2.274202152883682}},"json":"data/posts/2014/03/12/hexo-uml-tag-plugin.json","tags":[{"name":"CoffeeScript","slug":"CoffeeScript","path":"tags/CoffeeScript/","permalink":"http://catx.me/tags/CoffeeScript/","postCount":9},{"name":"GitHub","slug":"GitHub","path":"tags/GitHub/","permalink":"http://catx.me/tags/GitHub/","postCount":9},{"name":"Hexo","slug":"Hexo","path":"tags/Hexo/","permalink":"http://catx.me/tags/Hexo/","postCount":4},{"name":"Jumly","slug":"Jumly","path":"tags/Jumly/","permalink":"http://catx.me/tags/Jumly/","postCount":1},{"name":"Node.Js","slug":"Node-Js","path":"tags/Node-Js/","permalink":"http://catx.me/tags/Node-Js/","postCount":4},{"name":"UML","slug":"UML","path":"tags/UML/","permalink":"http://catx.me/tags/UML/","postCount":1}],"categories":[{"name":"挨踢","slug":"挨踢","path":"categories/挨踢/","permalink":"http://catx.me/categories/挨踢/","postCount":24}]},"sha1":"8229e12e36ecf0b8ca82f2a64bd93f20c452664a","isDigest":true},{"type":"post","json_base":"data/posts","json":"data/posts/2014/03/09/hexo-mathjax-plugin.json","path":"2014/03/09/hexo-mathjax-plugin/","data":{"title":"Hexo MathJax插件","content":"<div id=\"badge-container-akfish-hexo-math-6e264f5\" class=\"hexo-github\" style=\"width: 100%\"></div>\n<script src=\"/hexo-github/badge.js\"></script>\n<script type=\"text/javascript\">\n  loadStyle(\"/hexo-github/style.css\");\n  loadStyle(\"/hexo-github/octicons/octicons.css\");\n  new Badge(\"#badge-container-akfish-hexo-math-6e264f5\", \"akfish\", \"hexo-math\", \"6e264f5\", false);\n</script>\n\n<h2 id=\"u4ECB_u7ECD\"><a href=\"#u4ECB_u7ECD\" class=\"headerlink\" title=\"介绍\"></a>介绍</h2><p>Hexo不支持数学公式，网上可以找到很多人肉修改theme使其支持用<a href=\"http://www.mathjax.org/\" target=\"_blank\" rel=\"external\">MathJax</a>渲染公式的方法，主要分为两个步骤：</p>\n<ul>\n<li>在theme的header中插入对MathJax CDN script的引用，并配置inline math</li>\n<li>在文章中用inline math插入公式</li>\n</ul>\n<p>这个方法有两个明显的缺点：</p>\n<ul>\n<li>需要人肉进行的工作太多</li>\n<li>遇到特殊符号需要人肉escape，否则会被markdown parser吃掉</li>\n</ul>\n<p>于是开发了一个插件，实现：</p>\n<ul>\n<li>自动部署MathJax</li>\n<li>添加MathJax Tag</li>\n</ul>\n<h2 id=\"u5B89_u88C5\"><a href=\"#u5B89_u88C5\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-math --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"u521D_u59CB_u5316\"><a href=\"#u521D_u59CB_u5316\" class=\"headerlink\" title=\"初始化\"></a>初始化</h2><p>在blog文件夹中执行：</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo math install</span><br></pre></td></tr></table></figure>\n<p>在<code>_config.yml</code>文件中添加：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plugins:&#10;- hexo-math</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"u4F7F_u7528\"><a href=\"#u4F7F_u7528\" class=\"headerlink\" title=\"使用\"></a>使用</h2><p>对于不含特殊符号的公式，可以直接使用MathJax的inline math表达式.<br>如果含有特殊符号，则需要人肉escape，如<code>\\</code>之类的特殊符号在LaTex表达式中出现频率很高，这样就很麻烦，使用tag能够省不少事。</p>\n<p><strong>MathJax Inline:</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Simple inline $a = b + c$.</span><br></pre></td></tr></table></figure>\n<p>效果：</p>\n<p>Simple inline $a = b + c$.</p>\n<p><strong>MathJax Block:</strong><br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$$\\frac&#123;\\partial u&#125;&#123;\\partial t&#125;</span><br><span class=\"line\">= h^2 \\left( \\frac&#123;\\partial^2 u&#125;&#123;\\partial x^2&#125; +</span><br><span class=\"line\">\\frac&#123;\\partial^2 u&#125;&#123;\\partial y^2&#125; +</span><br><span class=\"line\">\\frac&#123;\\partial^2 u&#125;&#123;\\partial z^2&#125;\\right)$$</span><br></pre></td></tr></table></figure></p>\n<p>效果：</p>\n<p>$$\\frac{\\partial u}{\\partial t}<br>= h^2 \\left( \\frac{\\partial^2 u}{\\partial x^2} +<br>\\frac{\\partial^2 u}{\\partial y^2} +<br>\\frac{\\partial^2 u}{\\partial z^2}\\right)$$</p>\n<p><strong>Tag inline:</strong></p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">This equation &#123;&amp;#37; math \\cos 2\\theta = \\cos^2 \\theta - \\sin^2 \\theta =  2 \\cos^2 \\theta - 1 %&#125; is inline.</span><br></pre></td></tr></table></figure>\n<p>效果：</p>\n<p>This equation <span>$\\cos 2\\theta = \\cos^2 \\theta - \\sin^2 \\theta =  2 \\cos^2 \\theta - 1$</span><!-- Has MathJax --> is inline.</p>\n<p><strong>Tag Block:</strong><br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&amp;#37; math_block %&#125;</span><br><span class=\"line\">\\begin&#123;aligned&#125;</span><br><span class=\"line\">\\dot&#123;x&#125; &amp; = \\sigma(y-x) \\\\</span><br><span class=\"line\">\\dot&#123;y&#125; &amp; = \\rho x - y - xz \\\\</span><br><span class=\"line\">\\dot&#123;z&#125; &amp; = -\\beta z + xy</span><br><span class=\"line\">\\end&#123;aligned&#125;</span><br><span class=\"line\">&#123;&amp;#37; endmath_block %&#125;</span><br></pre></td></tr></table></figure></p>\n<p>效果：</p>\n<span>$$\\begin{aligned}\n\\dot{x} & = \\sigma(y-x) \\\\\n\\dot{y} & = \\rho x - y - xz \\\\\n\\dot{z} & = -\\beta z + xy\n\\end{aligned}$$</span><!-- Has MathJax -->\n<h2 id=\"u6E90_u4EE3_u7801\"><a href=\"#u6E90_u4EE3_u7801\" class=\"headerlink\" title=\"源代码\"></a>源代码</h2><p><a href=\"https://github.com/akfish/hexo-math\" target=\"_blank\" rel=\"external\">GitHub</a></p>\n","date":"2014-03-08T19:08:10.000Z","path":"2014/03/09/hexo-mathjax-plugin/","isDark":true,"featureColor":"#266cb4","featureImage":"/image/stock/1.jpg","excerpt":"","featureSwatch":{"Vibrant":{"color":"#266cb4","isDark":true,"contrast":5.450121616568956},"Muted":{"color":"#4b70a6","isDark":true,"contrast":5.296212493095912},"DarkVibrant":{"color":"#3260a1","isDark":true,"contrast":10.521199995853594},"DarkMuted":{"color":"#515787","isDark":true,"contrast":11.462157427934459},"LightVibrant":{"color":"#5791c6","isDark":true,"contrast":3.512948192359975},"LightMuted":{"color":"#9bb4cc","isDark":false,"contrast":2.144138719552091}},"json":"data/posts/2014/03/09/hexo-mathjax-plugin.json","tags":[{"name":"CoffeeScript","slug":"CoffeeScript","path":"tags/CoffeeScript/","permalink":"http://catx.me/tags/CoffeeScript/","postCount":9},{"name":"GitHub","slug":"GitHub","path":"tags/GitHub/","permalink":"http://catx.me/tags/GitHub/","postCount":9},{"name":"Hexo","slug":"Hexo","path":"tags/Hexo/","permalink":"http://catx.me/tags/Hexo/","postCount":4},{"name":"Node.Js","slug":"Node-Js","path":"tags/Node-Js/","permalink":"http://catx.me/tags/Node-Js/","postCount":4}],"categories":[{"name":"挨踢","slug":"挨踢","path":"categories/挨踢/","permalink":"http://catx.me/categories/挨踢/","postCount":24}]},"sha1":"122018056be7677cc7ce3c27ebb7629f13cbe1d9","isDigest":true},{"type":"post","json_base":"data/posts","json":"data/posts/2014/03/07/hexo-migrator-image.json","path":"2014/03/07/hexo-migrator-image/","data":{"title":"Hexo外链图片迁移插件","content":"<p>这两天打算把博客从Wordpress迁移到GitHub Page上，主要原因还是Wordpress的编辑不如Markdown来得爽，这个主机也不如GitHub服务器的速度和可访问性高。</p>\n<p>GitHub Pages的博客框架有很多选择，最终决定用基于Node.Js的<a href=\"https://github.com/tommy351/hexo\" target=\"_blank\" rel=\"external\">Hexo</a>，速度比官方的Jekyll系框架要快，并且不用折腾ruby。在使用<a href=\"https://github.com/hexojs/hexo-migrator-wordpress\" target=\"_blank\" rel=\"external\">hexo-migrator-wordpress</a>迁移文章后，发现所有图片依然是保持外链。翻了下Hexo的文档，自己写了个migrator迁移所有外链图片，流程很简单：</p>\n<ul>\n<li>打开所有.md文件</li>\n<li>扫描并解析Markdown插入图片的tag</li>\n<li>下载所有非本站的图片（包括本地图片）到images目录</li>\n<li>更新所有引用的url</li>\n</ul>\n<p>迁移前简单的通过对url做SHA1 hash可以避免部分图片重复，目前懒得对文件内容做对比，暂时是够用了。</p>\n<p>有了这个工具不仅能够完成迁移，以后写文章的时候也不用人肉拷贝图片算链接，只需要直接引用，发布前跑一次就行了。</p>\n<p>安装：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-migrator-image</span><br></pre></td></tr></table></figure></p>\n<p>使用：<br><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo migrate image</span><br></pre></td></tr></table></figure></p>\n<p>源代码：<a href=\"https://github.com/akfish/hexo-migrator-image\" target=\"_blank\" rel=\"external\">hexo-migrator-image</a></p>\n","date":"2014-03-06T19:03:22.000Z","path":"2014/03/07/hexo-migrator-image/","isDark":true,"featureColor":"#266cb4","featureImage":"/image/stock/1.jpg","excerpt":"","featureSwatch":{"Vibrant":{"color":"#266cb4","isDark":true,"contrast":5.450121616568956},"Muted":{"color":"#4b70a6","isDark":true,"contrast":5.296212493095912},"DarkVibrant":{"color":"#3260a1","isDark":true,"contrast":10.521199995853594},"DarkMuted":{"color":"#515787","isDark":true,"contrast":11.462157427934459},"LightVibrant":{"color":"#5791c6","isDark":true,"contrast":3.512948192359975},"LightMuted":{"color":"#9bb4cc","isDark":false,"contrast":2.144138719552091}},"json":"data/posts/2014/03/07/hexo-migrator-image.json","tags":[{"name":"CoffeeScript","slug":"CoffeeScript","path":"tags/CoffeeScript/","permalink":"http://catx.me/tags/CoffeeScript/","postCount":9},{"name":"GitHub","slug":"GitHub","path":"tags/GitHub/","permalink":"http://catx.me/tags/GitHub/","postCount":9},{"name":"Hexo","slug":"Hexo","path":"tags/Hexo/","permalink":"http://catx.me/tags/Hexo/","postCount":4},{"name":"Node.Js","slug":"Node-Js","path":"tags/Node-Js/","permalink":"http://catx.me/tags/Node-Js/","postCount":4}],"categories":[{"name":"挨踢","slug":"挨踢","path":"categories/挨踢/","permalink":"http://catx.me/categories/挨踢/","postCount":24}]},"sha1":"77a22e51bc5cb918023e69e427c7e047abe5dd4f","isDigest":true}],"sha1":"a5985b698cf04be8cf3ecb6c4bd523f00b001ef4"}